package MainFunction;

import DataStructure.TreeNode;

import java.util.Arrays;
import java.util.List;
import java.util.stream.Collectors;

/**
 * User: 兴希
 * Date: 2020/3/1
 * Time: 16:15
 * Description: 输入某二叉树的前序遍历和中序遍历的结果，请重建出该二叉树。假设输入的前序遍历和中序遍历的结果中都不含重复的数字。
 *              例如输入前序遍历序列{1,2,4,7,3,5,6,8}和中序遍历序列{4,7,2,1,5,3,8,6}，则重建二叉树并返回。
 */
public class ReConstructBinaryTree {
    public static TreeNode reConstructBinaryTree(int [] pre, int [] in) {
        if (pre.length<1){
            return null;
        }
        TreeNode root = reConstructTree(Arrays.stream(pre).boxed().collect(Collectors.toList()),
                Arrays.stream(in).boxed().collect(Collectors.toList()));
        return root;
    }

    private static TreeNode reConstructTree(List<Integer> pre, List<Integer> in){
        if (pre.size()==0){
            return null;
        }
        TreeNode root = new TreeNode(pre.get(0));

        for (int i=0;i<in.size();i++){
            if (pre.get(0)==in.get(i)){
                root.left = reConstructTree(pre.subList(1,i+1),in.subList(0,i));
                root.right = reConstructTree(pre.subList(i+1,pre.size()),in.subList(i+1,in.size()));
                break;
            }
        }
        return root;
    }

    public static void main(String[] args) {
        TreeNode node = reConstructBinaryTree(new int[]{2,4,9,15,36,65,131,253,508,1006,1008,509,1010,1013,255,512,1014,1017,515,1019,1022,133,258,517,1023,1025,519,1026,1027,260,521,1030,1032,524,1035,1037,67,135,262,525,1040,1043,527,1045,1047,265,528,1049,1051,530,1052,1054,138,266,531,1056,1058,533,1060,1063,268,535,1066,1067,537,1069,1070,38,68,140,271,539,1073,1074,540,1075,1076,274,543,1078,1079,546,1081,1083,141,275,548,1084,1086,550,1088,1090,277,552,1093,1096,554,1097,1098,69,142,280,556,1101,1104,557,1105,1108,281,559,1111,1114,562,1115,1117,145,284,564,1119,1120,565,1121,1124,285,567,1127,1130,570,1133,1136,17,39,72,148,288,572,1139,1141,575,1144,1147,289,576,1150,1153,577,1155,1157,151,292,579,1160,1162,581,1164,1167,294,582,1169,1170,585,1171,1173,73,152,297,588,1176,1177,589,1179,1182,299,591,1185,1186,592,1189,1191,153,300,593,1192,1195,596,1196,1198,303,598,1199,1201,599,1204,1206,42,75,154,306,601,1208,1210,604,1212,1213,309,605,1215,1218,607,1219,1220,155,311,609,1222,1225,612,1226,1228,313,613,1231,1234,615,1236,1237,78,158,314,617,1240,1242,620,1245,1247,317,623,1249,1251,626,1254,1257,160,320,629,1258,1261,631,1262,1264,322,633,1265,1268,635,1270,1273,11,20,45,80,161,324,638,1275,1278,641,1279,1281,326,644,1283,1284,645,1286,1289,163,329,647,1291,1293,648,1296,1297,331,649,1300,1301,651,1304,1305,83,166,333,652,1307,1308,654,1311,1314,336,655,1315,1318,656,1320,1321,169,337,658,1323,1324,660,1327,1329,338,663,1331,1332,666,1333,1334,46,85,170,339,668,1337,1340,670,1342,1343,340,671,1345,1346,674,1349,1352,173,342,675,1354,1357,676,1360,1363,345,677,1365,1368,678,1371,1373,88,175,346,679,1375,1376,682,1378,1381,349,685,1383,1384,687,1385,1387,176,351,688,1390,1393,690,1395,1397,352,691,1398,1400,693,1401,1404,23,47,90,177,354,695,1407,1410,696,1412,1415,357,698,1418,1419,700,1421,1423,178,360,701,1426,1427,702,1430,1432,363,705,1434,1436,706,1439,1442,91,181,365,707,1445,1448,710,1449,1452,366,712,1455,1456,715,1458,1460,182,368,717,1463,1465,718,1468,1470,370,721,1473,1475,723,1477,1479,49,94,185,373,726,1481,1483,727,1485,1487,374,729,1490,1493,731,1494,1497,188,377,733,1499,1501,734,1504,1505,378,736,1507,1510,739,1512,1513,97,189,381,740,1515,1517,741,1519,1522,383,742,1524,1527,743,1529,1531,191,385,746,1534,1537,749,1539,1542,388,750,1543,1546,752,1548,1550,7,12,26,52,99,192,389,755,1552,1555,758,1557,1558,391,760,1561,1562,761,1565,1568,193,393,764,1571,1574,767,1576,1577,394,769,1579,1581,771,1584,1586,102,194,395,773,1589,1590,774,1591,1593,398,777,1594,1596,780,1599,1602,196,400,783,1604,1607,784,1609,1610,401,785,1613,1614,786,1615,1617,54,104,198,404,788,1619,1620,790,1622,1623,405,791,1626,1628,794,1631,1632,201,407,795,1635,1637,797,1640,1642,409,798,1643,1645,799,1647,1650,105,202,412,802,1652,1655,804,1656,1657,414,806,1659,1661,808,1662,1664,203,416,809,1666,1668,810,1669,1671,418,811,1674,1677,813,1678,1680,29,55,108,204,421,814,1681,1683,816,1684,1685,424,819,1686,1687,820,1688,1690,205,425,823,1691,1692,825,1694,1695,426,826,1697,1698,829,1699,1702,109,206,427,832,1704,1707,835,1710,1712,430,837,1715,1716,840,1718,1721,207,431,843,1724,1726,845,1727,1728,433,847,1729,1732,849,1733,1736,56,112,209,434,851,1737,1739,854,1741,1742,437,855,1743,1744,858,1745,1748,211,440,861,1751,1753,863,1754,1755,443,864,1757,1760,866,1762,1764,113,213,444,867,1767,1769,869,1770,1771,446,870,1772,1773,871,1776,1777,216,447,873,1780,1782,874,1785,1788,450,875,1789,1792,876,1795,1797,14,32,59,115,219,451,877,1799,1802,880,1803,1806,454,882,1807,1810,883,1811,1814,220,456,884,1815,1816,886,1819,1822,457,887,1825,1827,889,1830,1832,116,222,459,890,1834,1837,892,1840,1843,461,895,1846,1848,897,1851,1852,225,462,900,1855,1856,903,1857,1859,465,906,1861,1864,909,1867,1868,60,118,226,466,911,1869,1871,913,1874,1875,468,914,1877,1880,916,1881,1882,227,470,919,1885,1886,921,1889,1892,473,923,1893,1894,924,1895,1897,120,228,476,927,1898,1900,928,1901,1904,478,930,1907,1909,932,1911,1914,229,479,933,1917,1918,936,1921,1924,481,939,1927,1928,941,1929,1931,35,61,122,232,483,943,1932,1935,944,1936,1937,484,945,1940,1942,948,1943,1944,235,485,950,1946,1948,953,1949,1952,486,954,1954,1956,956,1958,1960,124,238,489,957,1962,1964,960,1967,1968,490,963,1970,1972,964,1973,1974,240,492,965,1976,1978,968,1980,1981,493,969,1982,1984,972,1987,1989,62,126,242,495,974,1991,1993,976,1995,1998,496,977,2001,2003,980,2005,2007,245,499,982,2010,2013,984,2014,2015,501,985,2018,2020,988,2023,2026,129,247,502,991,2028,2031,993,2032,2033,503,996,2036,2037,998,2040,2042,250,504,999,2045,2047,1002,2050,2052,507,1003,2055,2056,1005,2059,2060},
                new int[]{1006,508,1008,253,1010,509,1013,131,1014,512,1017,255,1019,515,1022,65,1023,517,1025,258,1026,519,1027,133,1030,521,1032,260,1035,524,1037,36,1040,525,1043,262,1045,527,1047,135,1049,528,1051,265,1052,530,1054,67,1056,531,1058,266,1060,533,1063,138,1066,535,1067,268,1069,537,1070,15,1073,539,1074,271,1075,540,1076,140,1078,543,1079,274,1081,546,1083,68,1084,548,1086,275,1088,550,1090,141,1093,552,1096,277,1097,554,1098,38,1101,556,1104,280,1105,557,1108,142,1111,559,1114,281,1115,562,1117,69,1119,564,1120,284,1121,565,1124,145,1127,567,1130,285,1133,570,1136,9,1139,572,1141,288,1144,575,1147,148,1150,576,1153,289,1155,577,1157,72,1160,579,1162,292,1164,581,1167,151,1169,582,1170,294,1171,585,1173,39,1176,588,1177,297,1179,589,1182,152,1185,591,1186,299,1189,592,1191,73,1192,593,1195,300,1196,596,1198,153,1199,598,1201,303,1204,599,1206,17,1208,601,1210,306,1212,604,1213,154,1215,605,1218,309,1219,607,1220,75,1222,609,1225,311,1226,612,1228,155,1231,613,1234,313,1236,615,1237,42,1240,617,1242,314,1245,620,1247,158,1249,623,1251,317,1254,626,1257,78,1258,629,1261,320,1262,631,1264,160,1265,633,1268,322,1270,635,1273,4,1275,638,1278,324,1279,641,1281,161,1283,644,1284,326,1286,645,1289,80,1291,647,1293,329,1296,648,1297,163,1300,649,1301,331,1304,651,1305,45,1307,652,1308,333,1311,654,1314,166,1315,655,1318,336,1320,656,1321,83,1323,658,1324,337,1327,660,1329,169,1331,663,1332,338,1333,666,1334,20,1337,668,1340,339,1342,670,1343,170,1345,671,1346,340,1349,674,1352,85,1354,675,1357,342,1360,676,1363,173,1365,677,1368,345,1371,678,1373,46,1375,679,1376,346,1378,682,1381,175,1383,685,1384,349,1385,687,1387,88,1390,688,1393,351,1395,690,1397,176,1398,691,1400,352,1401,693,1404,11,1407,695,1410,354,1412,696,1415,177,1418,698,1419,357,1421,700,1423,90,1426,701,1427,360,1430,702,1432,178,1434,705,1436,363,1439,706,1442,47,1445,707,1448,365,1449,710,1452,181,1455,712,1456,366,1458,715,1460,91,1463,717,1465,368,1468,718,1470,182,1473,721,1475,370,1477,723,1479,23,1481,726,1483,373,1485,727,1487,185,1490,729,1493,374,1494,731,1497,94,1499,733,1501,377,1504,734,1505,188,1507,736,1510,378,1512,739,1513,49,1515,740,1517,381,1519,741,1522,189,1524,742,1527,383,1529,743,1531,97,1534,746,1537,385,1539,749,1542,191,1543,750,1546,388,1548,752,1550,2,1552,755,1555,389,1557,758,1558,192,1561,760,1562,391,1565,761,1568,99,1571,764,1574,393,1576,767,1577,193,1579,769,1581,394,1584,771,1586,52,1589,773,1590,395,1591,774,1593,194,1594,777,1596,398,1599,780,1602,102,1604,783,1607,400,1609,784,1610,196,1613,785,1614,401,1615,786,1617,26,1619,788,1620,404,1622,790,1623,198,1626,791,1628,405,16});
        System.out.println();
    }
}
